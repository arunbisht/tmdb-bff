<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMDB BFF API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .endpoints {
            display: grid;
            gap: 20px;
        }

        .endpoint {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .endpoint:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }

        .endpoint-method {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 10px;
            font-size: 0.9em;
        }

        .endpoint-path {
            font-family: 'Courier New', monospace;
            color: #333;
            font-weight: 600;
            display: inline-block;
        }

        .endpoint-description {
            color: #666;
            margin-top: 10px;
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .endpoint-details {
            background: #f5f5f5;
            padding: 12px;
            border-radius: 4px;
            font-size: 0.9em;
            color: #555;
            margin-top: 10px;
        }

        .endpoint-details strong {
            color: #333;
        }

        .notes {
            background: #f0f7ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 4px;
            margin-top: 30px;
            color: #333;
        }

        .notes h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .notes ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        .notes li {
            margin-bottom: 8px;
        }

        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üé¨ TMDB BFF</h1>
        <p class="subtitle">Backend-for-Frontend API wrapping The Movie Database (TMDB)</p>

        <div class="endpoints">
            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/api/health</span>
                <p class="endpoint-description">Basic health check endpoint to verify the server is running.</p>
                <div class="endpoint-details">
                    <strong>Response:</strong> <code>{ "status": "ok", "timestamp": 1234567890 }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/api/trending</span>
                <p class="endpoint-description">Fetch trending movies and TV shows.</p>
                <div class="endpoint-details">
                    <strong>Query Parameters:</strong> None required<br>
                    <strong>Response:</strong> Array of trending movies and TV shows with normalized data (id,
                    title/name, overview, poster, backdrop, rating, etc.)<br>
                    <strong>Caching:</strong> 5-minute TTL (LRU cache)
                </div>
            </div>

            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/api/movie/:id</span>
                <p class="endpoint-description">Get detailed information about a specific movie.</p>
                <div class="endpoint-details">
                    <strong>Path Parameters:</strong> <code>id</code> - TMDB movie ID<br>
                    <strong>Example:</strong> <code>/api/movie/550</code><br>
                    <strong>Response:</strong> Movie object with id, title, overview, poster, backdrop, releaseDate,
                    rating<br>
                    <strong>Caching:</strong> 5-minute TTL per movie
                </div>
            </div>

            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/api/tv/:id</span>
                <p class="endpoint-description">Get detailed information about a specific TV series.</p>
                <div class="endpoint-details">
                    <strong>Path Parameters:</strong> <code>id</code> - TMDB TV series ID<br>
                    <strong>Example:</strong> <code>/api/tv/1399</code><br>
                    <strong>Response:</strong> TV series object with id, name, overview, poster, backdrop, firstAirDate,
                    rating<br>
                    <strong>Caching:</strong> 5-minute TTL per series
                </div>
            </div>

            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/api/search</span>
                <p class="endpoint-description">Search for movies and TV shows by query string.</p>
                <div class="endpoint-details">
                    <strong>Query Parameters:</strong> <code>q</code> (required) - Search query<br>
                    <strong>Example:</strong> <code>/api/search?q=matrix</code><br>
                    <strong>Response:</strong> Array of matching movies and TV shows<br>
                    <strong>Caching:</strong> 5-minute TTL per query
                </div>
            </div>
        </div>

        <div class="notes">
            <h3>üìù Notes</h3>
            <ul>
                <li><strong>Authentication:</strong> All endpoints use your TMDB API key (set in <code>.env</code> as
                    <code>TMDB_API_KEY</code>)</li>
                <li><strong>Caching:</strong> Responses are cached in memory with a 5-minute TTL using LRU cache</li>
                <li><strong>Timeout & Retry:</strong> Network requests have a 5-second timeout with automatic retry (up
                    to 2 attempts)</li>
                <li><strong>Normalization:</strong> All responses are normalized to provide consistent field names
                    regardless of media type</li>
                <li><strong>Image URLs:</strong> Image paths are converted to full URLs pointing to TMDB's image CDN
                </li>
                <li><strong>Deployment:</strong> Designed for serverless deployment (Vercel, AWS Lambda, etc.) but also
                    runs locally with Node.js</li>
            </ul>
        </div>
    </div>
</body>

</html>